(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["topic_list"],{"2dbf":function(t,i,a){},"718a":function(t,i,a){"use strict";a("b23f")},"8a5a":function(t,i,a){"use strict";a("2dbf")},b23f:function(t,i,a){},c6f7:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"page-topic-list"},[i("ul",t._l(t.topics,(function(a){return i("li",[i("router-link",{attrs:{to:`/${t.board.name}/${a.id}`}},[i("div",{staticClass:"card topic-card"},[i("div",{staticClass:"topic-card-header"},[i("div",{staticClass:"topic-author-area"},[i("span",{staticClass:"topic-author"},[i("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("사용자:"+a.author_name)},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(a.author_name))]),i("span",{staticClass:"topic-author-link"},[t._v("("),i("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("사용자토론:"+a.author_name)},on:{click:function(t){t.stopPropagation()}}},[t._v("토론")]),t._v("|"),i("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("특수:기여/"+a.author_name)},on:{click:function(t){t.stopPropagation()}}},[t._v("기여")]),t._v(")")])])]),i("div",{staticClass:"topic-info-area"},[i("span",{staticClass:"topic-updated_at",attrs:{to:`/${t.board.name}/${a.id}`}},[t._v(t._s(t.updatedAtString(a)))])])]),i("div",{staticClass:"card-body"},[i("div",{staticClass:"topic-title-area"},[i("span",{staticClass:"topic-title"},[t._v(t._s(t.decodeTitle(a.title)))]),a.comment_count>1?i("span",{staticClass:"topic-comment-count"},[t._v("["+t._s(a.comment_count)+"]")]):t._e()]),i("div",{staticClass:"topic-icons"},[t.isUpdated(a)?i("b-tooltip",{staticClass:"topic-isupdated",attrs:{label:"마지막 방문 이후에 바뀜"}},[i("b-icon",{attrs:{icon:"exclamation"}})],1):t._e(),a.is_closed?i("b-tooltip",{staticClass:"topic-islocked",attrs:{label:"종료됨"}},[i("b-icon",{attrs:{icon:"lock"}})],1):a.is_suspended?i("b-tooltip",{staticClass:"topic-islocked",attrs:{label:"중단됨"}},[i("b-icon",{attrs:{icon:"lock"}})],1):t._e(),a.is_pinned?i("b-tooltip",{staticClass:"topic-ispinned",attrs:{label:"상단 고정됨"}},[i("b-icon",{attrs:{icon:"thumbtack"}})],1):t._e()],1)])])])],1)})),0),i("infinite-loading",{attrs:{spinner:"waveDots",identifier:t.infiniteId},on:{infinite:t.handleInfinite}},[i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]),i("hr"),i("new-topic")],1)},s=[],o=a("ade3"),n=(a("14d9"),a("9ab4")),c=a("1b40"),r=a("e06a"),l=a.n(r),d=a("e166"),p=a.n(d),u=a("7f5d"),b=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"modal",class:{"is-active":t.editorOpen}},[i("div",{staticClass:"modal-background"}),i("div",{staticClass:"modal-card"},[i("div",{staticClass:"modal-card-head"},[i("label",{staticClass:"modal-card-title"},[t._v("새 주제")]),i("button",{staticClass:"delete",on:{click:t.modalclose}})]),i("div",{staticClass:"modal-card-body"},[i("div",{staticClass:"new-topic"},[i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",placeholder:"제목"},domProps:{value:t.title},on:{input:function(i){i.target.composing||(t.title=i.target.value)}}})])]),i("div",{staticClass:"field"},[i("editor",{ref:"toastuiEditor",attrs:{options:t.editorOptions,initialEditType:"wysiwyg"}})],1)])]),i("div",{staticClass:"modal-card-foot"},[i("div",{staticClass:"field"},[t.user.isLoggedIn?t._e():i("span",[t._v("⚠️현재 로그인되어 있지 않습니다. 글 작성 시 IP가 노출됩니다.")]),i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",on:{click:t.handleSubmit}},[t._v("작성")])])])])])])},m=[],h=(a("f513"),a("4ede")),f=(a("af52"),a("0613"));let v=class extends c["c"]{constructor(...t){super(...t),Object(o["a"])(this,"title",""),Object(o["a"])(this,"editorOptions",{usageStatistics:!1,initialEditType:"wysiwyg",hideModeSwitch:!0,language:"ko-KR"}),Object(o["a"])(this,"$refs",void 0)}get board(){return f["a"].state.board}get user(){return f["a"].state.user}toBase64(t){return new Promise((i,a)=>{const e=new FileReader;e.readAsDataURL(t),e.onload=()=>i(e.result.split(",")[1]),e.onerror=t=>a(t)})}mounted(){this.$refs.toastuiEditor.invoke("addHook","addImageBlobHook",async(t,i)=>{if(t.size>1e7)f["a"].commit("setErrormodal","업로드할 파일 용량은 10MB까지만 가능합니다.");else{const{path:a}=await Object(u["l"])(t.name,await this.toBase64(t));i("https://image.librewiki.net/"+a)}})}async handleSubmit(){const t=this.$refs.toastuiEditor.invoke("getMarkdown"),i=await Object(u["m"])(this.board.id,this.title,t);this.$router.push(`/${this.board.name}/${i.id}`),this.modalclose()}get editorOpen(){return f["a"].state.editor.open}modalclose(){f["a"].commit("setEditorOpen",!1)}};v=Object(n["a"])([Object(c["a"])({components:{Editor:h["Editor"]}})],v);var _=v,C=_,k=(a("8a5a"),a("2877")),w=Object(k["a"])(C,b,m,!1,null,null,null),g=w.exports,O=a("8731"),I=a("1315");let j=class extends c["c"]{constructor(...t){super(...t),Object(o["a"])(this,"topics",[]),Object(o["a"])(this,"busy",!1),Object(o["a"])(this,"infiniteId",+new Date)}get board(){return f["a"].state.board}decodeTitle(t){return Object(O["a"])(t)}resetInfinite(){this.infiniteId=+new Date,this.topics=[]}async handleInfinite(t){const i=10,a=await Object(u["f"])(this.board.id,this.topics.length,i);a.length&&this.topics.push(...a),a.length<i?t.complete():t.loaded()}updatedAtString(t){return I["DateTime"].fromISO(t.updated_at).toRelative()+"에 업데이트됨"}isUpdated(t){const i=this.lastVisited(t.id);return!!i&&I["DateTime"].fromISO(t.updated_at)>i}lastVisited(t){const i=localStorage.getItem("topic-last-visited."+t);return i?I["DateTime"].fromISO(i):null}mounted(){1==f["a"].state.board.is_active&&0==f["a"].state.user.isBlocked&&f["a"].commit("setCanWrite",!0)}checkCanWrite(t){return 1!=t.is_closed&&1!=t.is_suspended&&1!=t.is_hidden&&1!=f["a"].state.user.isBlocked}};Object(n["a"])([Object(c["d"])("$route.params")],j.prototype,"resetInfinite",null),j=Object(n["a"])([Object(c["a"])({components:{NewTopic:g,InfiniteLoading:p.a,Gravatar:l.a},metaInfo(){return{title:this.board.display_name}}})],j);var y=j,$=y,S=(a("718a"),Object(k["a"])($,e,s,!1,null,null,null));i["default"]=S.exports}}]);
//# sourceMappingURL=topic_list.50f2a35e.js.map