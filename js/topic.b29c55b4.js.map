{"version":3,"sources":["webpack:///./src/views/Topic.vue?e512","webpack:///./src/components/TopicCommentCard.vue?c9a3","webpack:///./src/components/TopicCommentCard.vue","webpack:///./src/components/TopicCommentCard.vue?08e2","webpack:///./src/components/TopicCommentCard.vue?7110","webpack:///./src/components/NewComment.vue?89cc","webpack:///./src/components/NewComment.vue","webpack:///./src/components/NewComment.vue?2aee","webpack:///./src/components/NewComment.vue?3080","webpack:///./src/views/Topic.vue","webpack:///./src/views/Topic.vue?0ce1","webpack:///./src/views/Topic.vue?6d10","webpack:///./src/views/Topic.vue?8072","webpack:///./src/components/NewComment.vue?9a22","webpack:///./src/components/TopicCommentCard.vue?47a6"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","board","topic","_v","_s","decodeTitle","title","user","slot","on","unhide","hide","unsuspend","suspend","unclose","close","unpin","pin","_e","_l","comment","index","key","id","comments","$event","$set","infiniteId","handleInfinite","refresh","staticRenderFns","encodeURIComponent","author_name","stopPropagation","dateString","quote","showHidden","class","is_hidden","content","store","state","fromISO","created_at","toLocaleString","DATETIME_MED","data","$emit","console","log","replaceAll","value","commit","components","Viewer","component","editorOpen","modalclose","ref","editorOptions","isLoggedIn","handleSubmit","usageStatistics","initialEditType","hideModeSwitch","language","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","split","onerror","error","$refs","toastuiEditor","invoke","callback","size","name","toBase64","path","markdown","topicId","localStorage","setItem","Date","toISOString","editor","open","initialValue","Editor","board_id","is_closed","is_suspended","is_pinned","author_id","comment_count","updated_at","x","indexOf","newComment","$state","limit","parseInt","$route","params","length","push","complete","setTimeout","reset","loaded","busy","checkCanWrite","tp","isBlocked","$router","fetchData","immediate","TopicCommentCard","NewComment","InfiniteLoading","metaInfo","boardName","display_name","topicTitle"],"mappings":"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","file":"js/topic.b29c55b4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-topic\"},[_c('div',{staticClass:\"topic box level\"},[_c('router-link',{attrs:{\"to\":(\"/\" + (_vm.board.name) + \"/\" + (_vm.topic.id))}},[_c('h3',{staticClass:\"title topic-title\"},[_vm._v(_vm._s(_vm.decodeTitle(_vm.topic.title)))])]),(_vm.user.isAdmin)?_c('b-dropdown',{staticClass:\"admin-tools is-right\"},[_c('button',{staticClass:\"button is-small\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_vm._v(\"관리자 메뉴\")]),(_vm.topic.is_hidden)?_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.unhide}},[_vm._v(\"숨김 해제\")]):_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.hide}},[_vm._v(\"숨기기\")]),(_vm.topic.is_suspended)?_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.unsuspend}},[_vm._v(\"잠금 해제\")]):_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.suspend}},[_vm._v(\"잠그기\")]),(_vm.topic.is_closed)?_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.unclose}},[_vm._v(\"종료 취소\")]):_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.close}},[_vm._v(\"종료\")]),(_vm.topic.is_pinned)?_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.unpin}},[_vm._v(\"상단 고정 해제\")]):_c('b-dropdown-item',{staticClass:\"admin-button\",on:{\"click\":_vm.pin}},[_vm._v(\"상단 고정\")])],1):_vm._e()],1),_vm._l((_vm.comments),function(comment,index){return _c('topic-comment-card',{key:comment.id,staticClass:\"topic-content-card\",attrs:{\"comment\":_vm.comments[index]},on:{\"update:comment\":function($event){return _vm.$set(_vm.comments, index, $event)}}})}),_c('infinite-loading',{attrs:{\"identifier\":_vm.infiniteId},on:{\"infinite\":_vm.handleInfinite}},[_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"}),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"})]),_c('hr'),(_vm.topic.is_closed)?_c('p',[_vm._v(\"이 주제는 종료되어 의견을 추가할 수 없습니다.\")]):(_vm.topic.is_suspended)?_c('p',[_vm._v(\"이 주제는 잠겨있어 의견을 추가할 수 없습니다.\")]):(_vm.user.isBlocked)?_c('p',[_vm._v(\"차단되어 있어 의견을 추가할 수 없습니다.\")]):_c('new-comment',{attrs:{\"topic-id\":_vm.topic.id,\"refresh\":_vm.refresh}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card topic-comment-card\"},[_c('header',{staticClass:\"card-header\"},[_c('div',{staticClass:\"topic-comment-info\"},[_c('a',{attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('사용자:' + _vm.comment.author_name )))}},[_c('div',{staticClass:\"topic-comment-author\"},[_vm._v(_vm._s(_vm.comment.author_name))])]),_c('span',{staticClass:\"comment-author-link\"},[_vm._v(\"(\"),_c('a',{attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('사용자토론:' + _vm.comment.author_name)))},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"토론\")]),_vm._v(\"|\"),_c('a',{attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('특수:기여/' + _vm.comment.author_name)))},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"기여\")]),_vm._v(\")\")])]),_c('div',{staticClass:\"topic-comment-tools\"},[_c('div',{staticClass:\"topic-comment-date\"},[_vm._v(_vm._s(_vm.dateString))]),_c('b-dropdown',{staticClass:\"is-right\"},[_c('button',{staticClass:\"button is-small\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('b-icon',{attrs:{\"icon\":\"angle-down\"}})],1),_c('b-dropdown-item',{staticClass:\"comment-tool-button\",on:{\"click\":_vm.quote}},[_vm._v(\"인용\")]),(_vm.user.isAdmin)?[_c('hr',{staticClass:\"dropdown-divider\"}),(_vm.comment.is_hidden)?[_c('b-dropdown-item',{staticClass:\"comment-tool-button\",on:{\"click\":_vm.unhide}},[_vm._v(\"숨기기 취소\")]),_c('b-dropdown-item',{staticClass:\"comment-tool-button\",on:{\"click\":_vm.showHidden}},[_vm._v(\"내용 보기\")])]:_c('b-dropdown-item',{staticClass:\"comment-tool-button\",on:{\"click\":_vm.hide}},[_vm._v(\"숨기기\")]),_c('b-dropdown-item',{staticClass:\"comment-tool-button\",attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('특수:차단/' + _vm.comment.author_name )))}},[_vm._v(\"사용자 차단\")])]:_vm._e()],2)],1)]),_c('div',{staticClass:\"card-comment\",class:{ 'hidden-comment': _vm.comment.is_hidden }},[(_vm.comment.content)?_c('viewer',{attrs:{\"initialValue\":_vm.comment.content}}):_c('p',[_vm._v(\"이 의견은 관리자에 의해 숨겨졌습니다.\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { hideComment, unhideComment, getComment } from \"@/api\";\nimport type { Comment } from \"@/api\";\nimport store from \"@/store\";\nimport \"@toast-ui/editor/dist/toastui-editor-viewer.css\";\nimport { Viewer } from \"@toast-ui/vue-editor\";\nimport { DateTime } from \"luxon\";\n\n@Component({\n  components: {\n    Viewer,\n  },\n})\nexport default class TopicContentCard extends Vue {\n  @Prop() comment!: Comment;\n\n  get user(): typeof store.state.user {\n    return store.state.user;\n  }\n\n  get dateString(): string {\n    return DateTime.fromISO(this.comment.created_at).toLocaleString(\n      DateTime.DATETIME_MED\n    );\n  }\n\n  async hide(): Promise<void> {\n    const data = await hideComment(this.comment.id);\n    this.$emit(\"update:comment\", data);\n  }\n\n  async unhide(): Promise<void> {\n    const data = await unhideComment(this.comment.id);\n    this.$emit(\"update:comment\", data);\n  }\n\n  async showHidden(): Promise<void> {\n    const data = await getComment(this.comment.id, true);\n    this.$emit(\"update:comment\", data);\n  }\n\n  quote(): void {\n    console.log(this.comment.content);\n    const content = this.comment.content\n      ?.replaceAll(\"<br>\", \"\")\n      .replaceAll(\"\\n\", \"\\n> \");\n    const value = `>${this.dateString}에 ${this.comment.author_name} 님이 작성:\n>${content}\n`;\n    store.commit(\"setEditorOpen\", true);\n    store.commit(\"setEditorInitialValue\", value);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopicCommentCard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopicCommentCard.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TopicCommentCard.vue?vue&type=template&id=614596fe&lang=pug&\"\nimport script from \"./TopicCommentCard.vue?vue&type=script&lang=ts&\"\nexport * from \"./TopicCommentCard.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TopicCommentCard.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",class:{ 'is-active': _vm.editorOpen }},[_c('div',{staticClass:\"modal-background\"}),_c('div',{staticClass:\"modal-card\"},[_c('div',{staticClass:\"modal-card-head\"},[_c('label',{staticClass:\"modal-card-title\",attrs:{\"id\":\"label_newtopic\"}},[_vm._v(\"새 의견 추가하기\")]),_c('button',{staticClass:\"delete\",on:{\"click\":_vm.modalclose}})]),_c('div',{staticClass:\"modal-card-body\"},[_c('div',{staticClass:\"new-topic\"},[_c('div',{staticClass:\"field\"},[_c('editor',{ref:\"toastuiEditor\",attrs:{\"options\":_vm.editorOptions,\"initialEditType\":\"wysiwyg\"}})],1)])]),_c('div',{staticClass:\"modal-card-foot\"},[_c('div',{staticClass:\"field\"},[(!_vm.user.isLoggedIn)?_c('span',[_vm._v(\"⚠️현재 로그인되어 있지 않습니다. 글 작성 시 IP가 노출됩니다.\")]):_vm._e(),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-link\",on:{\"click\":_vm.handleSubmit}},[_vm._v(\"작성\")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\nimport { postFile, postComment } from \"@/api\";\nimport \"@toast-ui/editor/dist/toastui-editor.css\";\nimport { Editor } from \"@toast-ui/vue-editor\";\nimport \"@toast-ui/editor/dist/i18n/ko-kr\";\nimport store from \"@/store\";\n\n@Component({\n  components: {\n    Editor,\n  },\n})\nexport default class NewComment extends Vue {\n  @Prop() topicId!: number;\n  @Prop() refresh!: () => void;\n\n  get user(): typeof store.state.user {\n    return store.state.user;\n  }\n\n  editorOptions = {\n    usageStatistics: false,\n    initialEditType: \"wysiwyg\",\n    hideModeSwitch: true,\n    language: \"ko-KR\",\n  };\n  $refs!: {\n    toastuiEditor: Editor;\n  };\n\n  toBase64(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve((reader.result as string).split(\",\")[1]);\n      reader.onerror = (error) => reject(error);\n    });\n  }\n\n  mounted(): void {\n    type Callback = (url: string, text?: string) => void;\n    this.$refs.toastuiEditor.invoke(\n      \"addHook\",\n      \"addImageBlobHook\",\n      async (file: File, callback: Callback): Promise<void> => {\n        if (file.size > 10 * 1000000) {\n          store.commit(\n            \"setErrormodal\",\n            \"업로드할 파일 용량은 10MB까지만 가능합니다.\"\n          );\n          return;\n        } else {\n          const { path } = await postFile(file.name, await this.toBase64(file));\n          callback(`https://image.librewiki.net/${path}`);\n        }\n      }\n    );\n  }\n\n  async handleSubmit(): Promise<void> {\n    const markdown = this.$refs.toastuiEditor.invoke(\"getMarkdown\");\n    await postComment(this.topicId, markdown);\n    localStorage.setItem(\n      `topic-last-visited.${this.topicId}`,\n      new Date().toISOString()\n    );\n    this.$refs.toastuiEditor.invoke(\"reset\");\n    this.refresh();\n    this.modalclose();\n  }\n\n  get editorOpen(): boolean {\n    return store.state.editor.open;\n  }\n\n  @Watch(\"$store.state.editor.initialValue\")\n  onInitialValueChange(): void {\n    this.$refs.toastuiEditor.invoke(\n      \"setMarkdown\",\n      store.state.editor.initialValue\n    );\n  }\n\n  modalclose(): void {\n    store.commit(\"setEditorOpen\", false);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewComment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewComment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NewComment.vue?vue&type=template&id=92505eca&lang=pug&\"\nimport script from \"./NewComment.vue?vue&type=script&lang=ts&\"\nexport * from \"./NewComment.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NewComment.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport InfiniteLoading, { StateChanger } from \"vue-infinite-loading\";\nimport {\n  getComments,\n  getTopic,\n  hideTopic,\n  unhideTopic,\n  suspendTopic,\n  unsuspendTopic,\n  closeTopic,\n  uncloseTopic,\n  pinTopic,\n  unpinTopic,\n} from \"@/api\";\nimport type { Topic, Comment, Board } from \"@/api\";\nimport TopicCommentCard from \"@/components/TopicCommentCard.vue\";\nimport NewComment from \"@/components/NewComment.vue\";\nimport store from \"@/store\";\nimport { decode } from \"html-entities\";\nimport type { MetaInfo } from \"vue-meta\";\n\n@Component({\n  components: {\n    TopicCommentCard,\n    NewComment,\n    InfiniteLoading,\n  },\n  metaInfo(): MetaInfo {\n    const boardName = (this as TopicPage).board.display_name;\n    const topicTitle = (this as TopicPage).decodeTitle(\n      (this as TopicPage).topic.title\n    );\n    return {\n      title: `${topicTitle} - ${boardName}`,\n    };\n  },\n})\nexport default class TopicPage extends Vue {\n  topic: Topic = {\n    id: 0,\n    board_id: 0,\n    title: \"\",\n    is_closed: false,\n    is_suspended: false,\n    is_hidden: false,\n    is_pinned: false,\n    author_id: 0,\n    author_name: \"\",\n    comment_count: 0,\n    created_at: \"\",\n    updated_at: \"\",\n  };\n  comments: Comment[] = [];\n  busy = false;\n  infiniteId = +new Date();\n\n  get user(): typeof store.state.user {\n    return store.state.user;\n  }\n\n  get board(): Board {\n    return store.state.board;\n  }\n\n  decodeTitle(x: string): string {\n    return decode(x);\n  }\n\n  refresh(): void {\n    this.infiniteId += 1;\n  }\n\n  async refreshComment(comment: Comment): Promise<void> {\n    const index = this.comments.indexOf(comment);\n    const newComment = (await getComments(this.topic.id, index, 1))[0];\n    this.$set(this.comments, index, newComment);\n  }\n\n  async handleInfinite($state: StateChanger): Promise<void> {\n    const limit = 10;\n    const topicId = parseInt(this.$route.params.topicId);\n    const comments = await getComments(topicId, this.comments.length, limit);\n    if (comments.length) {\n      this.comments.push(...comments);\n    }\n    if (comments.length < limit) {\n      $state.complete();\n      setTimeout($state.reset, 10000);\n    } else {\n      $state.loaded();\n    }\n  }\n\n  @Watch(\"$route.params\", { immediate: true })\n  async fetchData(): Promise<void> {\n    this.busy = true;\n    try {\n      const topicId = parseInt(this.$route.params.topicId);\n      const topic = await getTopic(topicId);\n      this.topic = topic;\n      this.checkCanWrite(topic);\n      localStorage.setItem(\n        `topic-last-visited.${topic.id}`,\n        new Date().toISOString()\n      );\n    } catch (error) {\n      store.commit(\"setError\", error);\n    } finally {\n      this.busy = false;\n    }\n  }\n\n  checkCanWrite(tp: Topic): void {\n    if (\n      tp.is_closed == true ||\n      tp.is_suspended == true ||\n      tp.is_hidden == true ||\n      store.state.user.isBlocked == true\n    ) {\n      store.commit(\"setCanWrite\", false);\n    } else {\n      store.commit(\"setCanWrite\", true);\n    }\n  }\n\n  async hide(): Promise<void> {\n    await hideTopic(this.topic.id);\n    this.$router.push(`/${this.board.name}`);\n  }\n\n  async unhide(): Promise<void> {\n    await unhideTopic(this.topic.id);\n    await this.fetchData();\n  }\n\n  async suspend(): Promise<void> {\n    await suspendTopic(this.topic.id);\n    await this.fetchData();\n  }\n\n  async unsuspend(): Promise<void> {\n    await unsuspendTopic(this.topic.id);\n    await this.fetchData();\n  }\n\n  async close(): Promise<void> {\n    await closeTopic(this.topic.id);\n    await this.fetchData();\n  }\n\n  async unclose(): Promise<void> {\n    await uncloseTopic(this.topic.id);\n    await this.fetchData();\n  }\n\n  async pin(): Promise<void> {\n    await pinTopic(this.topic.id);\n    await this.fetchData();\n  }\n\n  async unpin(): Promise<void> {\n    await unpinTopic(this.topic.id);\n    await this.fetchData();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Topic.vue?vue&type=template&id=04637a7a&lang=pug&\"\nimport script from \"./Topic.vue?vue&type=script&lang=ts&\"\nexport * from \"./Topic.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Topic.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewComment.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopicCommentCard.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}