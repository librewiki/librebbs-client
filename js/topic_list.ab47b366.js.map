{"version":3,"sources":["webpack:///./src/views/TopicList.vue?6bd6","webpack:///./src/components/NewTopic.vue?e0f5","webpack:///./src/views/TopicList.vue?4122","webpack:///./src/components/NewTopic.vue?dd79","webpack:///./src/components/NewTopic.vue","webpack:///./src/components/NewTopic.vue?2dbf","webpack:///./src/components/NewTopic.vue?5bb9","webpack:///./src/views/TopicList.vue","webpack:///./src/views/TopicList.vue?b01e","webpack:///./src/views/TopicList.vue?737a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","topic","attrs","board","encodeURIComponent","author_name","on","$event","stopPropagation","_v","_s","updatedAtString","decodeTitle","title","comment_count","_e","isUpdated","infiniteId","handleInfinite","slot","staticRenderFns","class","editorOpen","modalclose","directives","name","rawName","value","expression","domProps","target","composing","ref","editorOptions","user","isLoggedIn","handleSubmit","usageStatistics","initialEditType","hideModeSwitch","language","store","state","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","split","onerror","error","$refs","toastuiEditor","invoke","callback","size","commit","toBase64","path","markdown","id","$router","push","editor","open","components","Editor","component","Date","x","topics","$state","limit","length","complete","loaded","fromISO","updated_at","toRelative","lastVisited","item","localStorage","getItem","is_active","isBlocked","tp","is_closed","is_suspended","is_hidden","NewTopic","InfiniteLoading","Gravatar","metaInfo","display_name"],"mappings":"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","file":"js/topic_list.ab47b366.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopicList.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewTopic.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-topic-list\"},[_c('ul',_vm._l((_vm.topics),function(topic){return _c('li',[_c('router-link',{attrs:{\"to\":(\"/\" + (_vm.board.name) + \"/\" + (topic.id))}},[_c('div',{staticClass:\"card topic-card\"},[_c('div',{staticClass:\"topic-card-header\"},[_c('div',{staticClass:\"topic-author-area\"},[_c('span',{staticClass:\"topic-author\"},[_c('a',{attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('사용자:' + topic.author_name)))},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(_vm._s(topic.author_name))]),_c('span',{staticClass:\"topic-author-link\"},[_vm._v(\"(\"),_c('a',{attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('사용자토론:' + topic.author_name)))},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"토론\")]),_vm._v(\"|\"),_c('a',{attrs:{\"href\":(\"https://librewiki.net/wiki/\" + (encodeURIComponent('특수:기여/' + topic.author_name)))},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"기여\")]),_vm._v(\")\")])])]),_c('div',{staticClass:\"topic-info-area\"},[_c('span',{staticClass:\"topic-updated_at\",attrs:{\"to\":(\"/\" + (_vm.board.name) + \"/\" + (topic.id))}},[_vm._v(_vm._s(_vm.updatedAtString(topic)))])])]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"topic-title-area\"},[_c('span',{staticClass:\"topic-title\"},[_vm._v(_vm._s(_vm.decodeTitle(topic.title)))]),(topic.comment_count > 1)?_c('span',{staticClass:\"topic-comment-count\"},[_vm._v(\"[\"+_vm._s(topic.comment_count)+\"]\")]):_vm._e()]),_c('div',{staticClass:\"topic-icons\"},[(_vm.isUpdated(topic))?_c('b-tooltip',{staticClass:\"topic-isupdated\",attrs:{\"label\":\"마지막 방문 이후에 바뀜\"}},[_c('b-icon',{attrs:{\"icon\":\"exclamation\"}})],1):_vm._e(),(topic.is_closed)?_c('b-tooltip',{staticClass:\"topic-islocked\",attrs:{\"label\":\"종료됨\"}},[_c('b-icon',{attrs:{\"icon\":\"lock\"}})],1):(topic.is_suspended)?_c('b-tooltip',{staticClass:\"topic-islocked\",attrs:{\"label\":\"중단됨\"}},[_c('b-icon',{attrs:{\"icon\":\"lock\"}})],1):_vm._e(),(topic.is_pinned)?_c('b-tooltip',{staticClass:\"topic-ispinned\",attrs:{\"label\":\"상단 고정됨\"}},[_c('b-icon',{attrs:{\"icon\":\"thumbtack\"}})],1):_vm._e()],1)])])])],1)}),0),_c('infinite-loading',{attrs:{\"spinner\":\"waveDots\",\"identifier\":_vm.infiniteId},on:{\"infinite\":_vm.handleInfinite}},[_c('div',{attrs:{\"slot\":\"no-more\"},slot:\"no-more\"}),_c('div',{attrs:{\"slot\":\"no-results\"},slot:\"no-results\"})]),_c('hr'),_c('new-topic')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",class:{ 'is-active': _vm.editorOpen }},[_c('div',{staticClass:\"modal-background\"}),_c('div',{staticClass:\"modal-card\"},[_c('div',{staticClass:\"modal-card-head\"},[_c('label',{staticClass:\"modal-card-title\"},[_vm._v(\"새 주제\")]),_c('button',{staticClass:\"delete\",on:{\"click\":_vm.modalclose}})]),_c('div',{staticClass:\"modal-card-body\"},[_c('div',{staticClass:\"new-topic\"},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"제목\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('editor',{ref:\"toastuiEditor\",attrs:{\"options\":_vm.editorOptions,\"initialEditType\":\"wysiwyg\"}})],1)])]),_c('div',{staticClass:\"modal-card-foot\"},[_c('div',{staticClass:\"field\"},[(!_vm.user.isLoggedIn)?_c('span',[_vm._v(\"⚠️현재 로그인되어 있지 않습니다. 글 작성 시 IP가 노출됩니다.\")]):_vm._e(),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-link\",on:{\"click\":_vm.handleSubmit}},[_vm._v(\"작성\")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { postFile, postTopic } from \"@/api\";\nimport type { Board } from \"@/api\";\nimport \"@toast-ui/editor/dist/toastui-editor.css\";\nimport { Editor } from \"@toast-ui/vue-editor\";\nimport \"@toast-ui/editor/dist/i18n/ko-kr\";\nimport store from \"@/store\";\n\n@Component({\n  components: {\n    Editor,\n  },\n})\nexport default class NewTopic extends Vue {\n  title = \"\";\n  editorOptions = {\n    usageStatistics: false,\n    initialEditType: \"wysiwyg\",\n    hideModeSwitch: true,\n    language: \"ko-KR\",\n  };\n  $refs!: {\n    toastuiEditor: Editor;\n  };\n\n  get board(): Board {\n    return store.state.board;\n  }\n\n  get user(): typeof store.state.user {\n    return store.state.user;\n  }\n\n  toBase64(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve((reader.result as string).split(\",\")[1]);\n      reader.onerror = (error) => reject(error);\n    });\n  }\n\n  mounted(): void {\n    type Callback = (url: string, text?: string) => void;\n    this.$refs.toastuiEditor.invoke(\n      \"addHook\",\n      \"addImageBlobHook\",\n      async (file: File, callback: Callback): Promise<void> => {\n        if (file.size > 10 * 1000000) {\n          store.commit(\n            \"setErrormodal\",\n            \"업로드할 파일 용량은 10MB까지만 가능합니다.\"\n          );\n          return;\n        } else {\n          const { path } = await postFile(file.name, await this.toBase64(file));\n          callback(`https://image.librewiki.net/${path}`);\n        }\n      }\n    );\n  }\n\n  async handleSubmit(): Promise<void> {\n    const markdown = this.$refs.toastuiEditor.invoke(\"getMarkdown\");\n    const topic = await postTopic(this.board.id, this.title, markdown);\n    this.$router.push(`/${this.board.name}/${topic.id}`);\n    this.modalclose();\n  }\n\n  get editorOpen(): boolean {\n    return store.state.editor.open;\n  }\n\n  modalclose(): void {\n    store.commit(\"setEditorOpen\", false);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewTopic.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewTopic.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NewTopic.vue?vue&type=template&id=b9b36330&lang=pug&\"\nimport script from \"./NewTopic.vue?vue&type=script&lang=ts&\"\nexport * from \"./NewTopic.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NewTopic.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport Gravatar from \"vue-gravatar\";\nimport InfiniteLoading, { StateChanger } from \"vue-infinite-loading\";\nimport { getTopics } from \"@/api\";\nimport type { Topic, Board } from \"@/api\";\nimport NewTopic from \"@/components/NewTopic.vue\";\nimport store from \"@/store\";\nimport { decode } from \"html-entities\";\nimport type { MetaInfo } from \"vue-meta\";\nimport { DateTime } from \"luxon\";\n\n@Component({\n  components: {\n    NewTopic,\n    InfiniteLoading,\n    Gravatar,\n  },\n  metaInfo(): MetaInfo {\n    return {\n      title: (this as TopicListPage).board.display_name,\n    };\n  },\n})\nexport default class TopicListPage extends Vue {\n  topics: Topic[] = [];\n  busy = false;\n  infiniteId = +new Date();\n\n  get board(): Board {\n    return store.state.board;\n  }\n\n  decodeTitle(x: string): string {\n    return decode(x);\n  }\n\n  @Watch(\"$route.params\")\n  resetInfinite(): void {\n    this.infiniteId = +new Date();\n    this.topics = [];\n  }\n\n  async handleInfinite($state: StateChanger): Promise<void> {\n    const limit = 10;\n    const topics = await getTopics(this.board.id, this.topics.length, limit);\n\n    if (topics.length) {\n      this.topics.push(...topics);\n    }\n    if (topics.length < limit) {\n      $state.complete();\n    } else {\n      $state.loaded();\n    }\n  }\n\n  updatedAtString(topic: Topic): string {\n    return `${DateTime.fromISO(topic.updated_at).toRelative()}에 업데이트됨`;\n  }\n\n  isUpdated(topic: Topic): boolean {\n    const lastVisited = this.lastVisited(topic.id);\n    return !!lastVisited && DateTime.fromISO(topic.updated_at) > lastVisited;\n  }\n\n  lastVisited(id: number): DateTime | null {\n    const item = localStorage.getItem(`topic-last-visited.${id}`);\n\n    if (item) {\n      return DateTime.fromISO(item);\n    } else {\n      return null;\n    }\n  }\n\n  mounted(): void {\n    if (\n      store.state.board.is_active == true &&\n      store.state.user.isBlocked == false\n    ) {\n      store.commit(\"setCanWrite\", true);\n    }\n  }\n\n  checkCanWrite(tp: Topic): boolean {\n    if (\n      tp.is_closed == true ||\n      tp.is_suspended == true ||\n      tp.is_hidden == true ||\n      store.state.user.isBlocked == true\n    ) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopicList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopicList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TopicList.vue?vue&type=template&id=50ff8da9&lang=pug&\"\nimport script from \"./TopicList.vue?vue&type=script&lang=ts&\"\nexport * from \"./TopicList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TopicList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}