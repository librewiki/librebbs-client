(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["topic_list"],{"0ca6":function(t,i,e){"use strict";e("b7c1")},"2dbf":function(t,i,e){},"8a5a":function(t,i,e){"use strict";e("2dbf")},b7c1:function(t,i,e){},c6f7:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"page-topic-list"},[i("ul",t._l(t.topics,(function(e){return i("li",[i("router-link",{attrs:{to:`/${t.board.name}/${e.id}`}},[i("div",{staticClass:"card topic-card"},[i("div",{staticClass:"topic-card-header"},[i("div",{staticClass:"topic-author-area"},[i("span",{staticClass:"topic-author"},[i("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("사용자:"+e.authorName)},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e.authorName))]),i("span",{staticClass:"topic-author-link"},[t._v("("),i("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("사용자토론:"+e.authorName)},on:{click:function(t){t.stopPropagation()}}},[t._v("토론")]),t._v("|"),i("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("특수:기여/"+e.authorName)},on:{click:function(t){t.stopPropagation()}}},[t._v("기여")]),t._v(")")])])]),i("div",{staticClass:"topic-info-area"},[i("span",{staticClass:"topic-updated_at",attrs:{to:`/${t.board.name}/${e.id}`}},[t._v(t._s(t.updatedAtString(e)))])])]),i("div",{staticClass:"card-body"},[i("div",{staticClass:"topic-title-area"},[i("span",{staticClass:"topic-title"},[t._v(t._s(t.decodeTitle(e.title)))]),e.commentCount>1?i("span",{staticClass:"topic-comment-count"},[t._v("["+t._s(e.commentCount)+"]")]):t._e()]),i("div",{staticClass:"topic-icons"},[t.isUpdated(e)?i("b-tooltip",{staticClass:"topic-isupdated",attrs:{label:"마지막 방문 이후에 바뀜"}},[i("b-icon",{attrs:{icon:"exclamation"}})],1):t._e(),e.isClosed?i("b-tooltip",{staticClass:"topic-islocked",attrs:{label:"종료됨"}},[i("b-icon",{attrs:{icon:"lock"}})],1):e.isSuspended?i("b-tooltip",{staticClass:"topic-islocked",attrs:{label:"중단됨"}},[i("b-icon",{attrs:{icon:"lock"}})],1):t._e(),e.isPinned?i("b-tooltip",{staticClass:"topic-ispinned",attrs:{label:"상단 고정됨"}},[i("b-icon",{attrs:{icon:"thumbtack"}})],1):t._e()],1)])])])],1)})),0),i("infinite-loading",{attrs:{spinner:"waveDots",identifier:t.infiniteId},on:{infinite:t.handleInfinite}},[i("div",{attrs:{slot:"no-more"},slot:"no-more"}),i("div",{attrs:{slot:"no-results"},slot:"no-results"})]),i("hr"),i("new-topic")],1)},s=[],o=e("ade3"),n=(e("14d9"),e("9ab4")),c=e("1b40"),r=e("e06a"),l=e.n(r),d=e("e166"),p=e.n(d),u=e("7f5d"),b=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"modal",class:{"is-active":t.editorOpen}},[i("div",{staticClass:"modal-background"}),i("div",{staticClass:"modal-card"},[i("div",{staticClass:"modal-card-head"},[i("label",{staticClass:"modal-card-title"},[t._v("새 주제")]),i("button",{staticClass:"delete",on:{click:t.modalclose}})]),i("div",{staticClass:"modal-card-body"},[i("div",{staticClass:"new-topic"},[i("div",{staticClass:"field"},[i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",placeholder:"제목"},domProps:{value:t.title},on:{input:function(i){i.target.composing||(t.title=i.target.value)}}})])]),i("div",{staticClass:"field"},[i("editor",{ref:"toastuiEditor",attrs:{options:t.editorOptions,initialEditType:"wysiwyg"}})],1)])]),i("div",{staticClass:"modal-card-foot"},[i("div",{staticClass:"field"},[t.user.isLoggedIn?t._e():i("span",[t._v("⚠️현재 로그인되어 있지 않습니다. 글 작성 시 IP가 노출됩니다.")]),i("div",{staticClass:"control"},[i("button",{staticClass:"button is-link",on:{click:t.handleSubmit}},[t._v("작성")])])])])])])},m=[],h=(e("f513"),e("4ede")),v=(e("af52"),e("0613"));let f=class extends c["c"]{constructor(...t){super(...t),Object(o["a"])(this,"title",""),Object(o["a"])(this,"editorOptions",{usageStatistics:!1,initialEditType:"wysiwyg",hideModeSwitch:!0,language:"ko-KR"}),Object(o["a"])(this,"$refs",void 0)}get board(){return v["a"].state.board}get user(){return v["a"].state.user}toBase64(t){return new Promise((i,e)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>i(a.result.split(",")[1]),a.onerror=t=>e(t)})}mounted(){this.$refs.toastuiEditor.invoke("addHook","addImageBlobHook",async(t,i)=>{if(t.size>1e7)v["a"].commit("setErrormodal","업로드할 파일 용량은 10MB까지만 가능합니다.");else{const{path:e}=await Object(u["l"])(t.name,await this.toBase64(t));i("https://image.librewiki.net/"+e)}})}async handleSubmit(){const t=this.$refs.toastuiEditor.invoke("getMarkdown"),i=await Object(u["m"])(this.board.id,this.title,t);this.$router.push(`/${this.board.name}/${i.id}`),this.modalclose()}get editorOpen(){return v["a"].state.editor.open}modalclose(){v["a"].commit("setEditorOpen",!1)}};f=Object(n["a"])([Object(c["a"])({components:{Editor:h["Editor"]}})],f);var C=f,k=C,w=(e("8a5a"),e("2877")),_=Object(w["a"])(k,b,m,!1,null,null,null),g=_.exports,O=e("8731"),I=e("1315");let j=class extends c["c"]{constructor(...t){super(...t),Object(o["a"])(this,"topics",[]),Object(o["a"])(this,"busy",!1),Object(o["a"])(this,"infiniteId",+new Date)}get board(){return v["a"].state.board}decodeTitle(t){return Object(O["a"])(t)}resetInfinite(){this.infiniteId=+new Date,this.topics=[]}async handleInfinite(t){const i=10,e=await Object(u["f"])(this.board.id,this.topics.length,i);e.length&&this.topics.push(...e),e.length<i?t.complete():t.loaded()}updatedAtString(t){return I["DateTime"].fromISO(t.updatedAt).toRelative()+"에 업데이트됨"}isUpdated(t){const i=this.lastVisited(t.id);return!!i&&I["DateTime"].fromISO(t.updatedAt)>i}lastVisited(t){const i=localStorage.getItem("topic-last-visited."+t);return i?I["DateTime"].fromISO(i):null}mounted(){1==v["a"].state.board.isActive&&0==v["a"].state.user.isBlocked&&v["a"].commit("setCanWrite",!0)}checkCanWrite(t){return 1!=t.isClosed&&1!=t.isSuspended&&1!=t.isHidden&&1!=v["a"].state.user.isBlocked}};Object(n["a"])([Object(c["d"])("$route.params")],j.prototype,"resetInfinite",null),j=Object(n["a"])([Object(c["a"])({components:{NewTopic:g,InfiniteLoading:p.a,Gravatar:l.a},metaInfo(){return{title:this.board.displayName}}})],j);var y=j,S=y,$=(e("0ca6"),Object(w["a"])(S,a,s,!1,null,null,null));i["default"]=$.exports}}]);
//# sourceMappingURL=topic_list.e53ee88e.js.map