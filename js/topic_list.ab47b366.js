(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["topic_list"],{"0c52":function(t,e,a){},"9f80":function(t,e,a){"use strict";a("ead7")},a3a9:function(t,e,a){"use strict";a("0c52")},c6f7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-topic-list"},[a("ul",t._l(t.topics,(function(e){return a("li",[a("router-link",{attrs:{to:"/"+t.board.name+"/"+e.id}},[a("div",{staticClass:"card topic-card"},[a("div",{staticClass:"topic-card-header"},[a("div",{staticClass:"topic-author-area"},[a("span",{staticClass:"topic-author"},[a("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("사용자:"+e.author_name)},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e.author_name))]),a("span",{staticClass:"topic-author-link"},[t._v("("),a("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("사용자토론:"+e.author_name)},on:{click:function(t){t.stopPropagation()}}},[t._v("토론")]),t._v("|"),a("a",{attrs:{href:"https://librewiki.net/wiki/"+encodeURIComponent("특수:기여/"+e.author_name)},on:{click:function(t){t.stopPropagation()}}},[t._v("기여")]),t._v(")")])])]),a("div",{staticClass:"topic-info-area"},[a("span",{staticClass:"topic-updated_at",attrs:{to:"/"+t.board.name+"/"+e.id}},[t._v(t._s(t.updatedAtString(e)))])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"topic-title-area"},[a("span",{staticClass:"topic-title"},[t._v(t._s(t.decodeTitle(e.title)))]),e.comment_count>1?a("span",{staticClass:"topic-comment-count"},[t._v("["+t._s(e.comment_count)+"]")]):t._e()]),a("div",{staticClass:"topic-icons"},[t.isUpdated(e)?a("b-tooltip",{staticClass:"topic-isupdated",attrs:{label:"마지막 방문 이후에 바뀜"}},[a("b-icon",{attrs:{icon:"exclamation"}})],1):t._e(),e.is_closed?a("b-tooltip",{staticClass:"topic-islocked",attrs:{label:"종료됨"}},[a("b-icon",{attrs:{icon:"lock"}})],1):e.is_suspended?a("b-tooltip",{staticClass:"topic-islocked",attrs:{label:"중단됨"}},[a("b-icon",{attrs:{icon:"lock"}})],1):t._e(),e.is_pinned?a("b-tooltip",{staticClass:"topic-ispinned",attrs:{label:"상단 고정됨"}},[a("b-icon",{attrs:{icon:"thumbtack"}})],1):t._e()],1)])])])],1)})),0),a("infinite-loading",{attrs:{spinner:"waveDots",identifier:t.infiniteId},on:{infinite:t.handleInfinite}},[a("div",{attrs:{slot:"no-more"},slot:"no-more"}),a("div",{attrs:{slot:"no-results"},slot:"no-results"})]),a("hr"),a("new-topic")],1)},n=[],s=a("2909"),o=a("1da1"),r=a("d4ec"),c=a("bee2"),l=a("257e"),d=a("262e"),u=a("2caf"),p=a("ade3"),f=(a("96cf"),a("99af"),a("9ab4")),b=a("1b40"),v=a("e06a"),m=a.n(v),h=a("e166"),k=a.n(h),_=a("7f5d"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.editorOpen}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("div",{staticClass:"modal-card-head"},[a("label",{staticClass:"modal-card-title"},[t._v("새 주제")]),a("button",{staticClass:"delete",on:{click:t.modalclose}})]),a("div",{staticClass:"modal-card-body"},[a("div",{staticClass:"new-topic"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",attrs:{type:"text",placeholder:"제목"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("editor",{ref:"toastuiEditor",attrs:{options:t.editorOptions,initialEditType:"wysiwyg"}})],1)])]),a("div",{staticClass:"modal-card-foot"},[a("div",{staticClass:"field"},[t.user.isLoggedIn?t._e():a("span",[t._v("⚠️현재 로그인되어 있지 않습니다. 글 작성 시 IP가 노출됩니다.")]),a("div",{staticClass:"control"},[a("button",{staticClass:"button is-link",on:{click:t.handleSubmit}},[t._v("작성")])])])])])])},g=[],w=(a("d3b7"),a("ac1f"),a("1276"),a("b0c0"),a("f513"),a("4ede")),C=(a("af52"),a("0613")),y=function(t){Object(d["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;Object(r["a"])(this,a);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n)),Object(p["a"])(Object(l["a"])(t),"title",""),Object(p["a"])(Object(l["a"])(t),"editorOptions",{usageStatistics:!1,initialEditType:"wysiwyg",hideModeSwitch:!0,language:"ko-KR"}),Object(p["a"])(Object(l["a"])(t),"$refs",void 0),t}return Object(c["a"])(a,[{key:"board",get:function(){return C["a"].state.board}},{key:"user",get:function(){return C["a"].state.user}},{key:"toBase64",value:function(t){return new Promise((function(e,a){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result.split(",")[1])},i.onerror=function(t){return a(t)}}))}},{key:"mounted",value:function(){var t=this;this.$refs.toastuiEditor.invoke("addHook","addImageBlobHook",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a,i){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(a.size>1e7)){e.next=5;break}return C["a"].commit("setErrormodal","업로드할 파일 용량은 10MB까지만 가능합니다."),e.abrupt("return");case 5:return e.t0=_["l"],e.t1=a.name,e.next=9,t.toBase64(a);case 9:return e.t2=e.sent,e.next=12,(0,e.t0)(e.t1,e.t2);case 12:n=e.sent,s=n.path,i("https://image.librewiki.net/".concat(s));case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}},{key:"handleSubmit",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$refs.toastuiEditor.invoke("getMarkdown"),t.next=3,Object(_["m"])(this.board.id,this.title,e);case 3:a=t.sent,this.$router.push("/".concat(this.board.name,"/").concat(a.id)),this.modalclose();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"editorOpen",get:function(){return C["a"].state.editor.open}},{key:"modalclose",value:function(){C["a"].commit("setEditorOpen",!1)}}]),a}(b["c"]);y=Object(f["a"])([Object(b["a"])({components:{Editor:w["Editor"]}})],y);var j=y,I=j,x=(a("a3a9"),a("2877")),R=Object(x["a"])(I,O,g,!1,null,null,null),E=R.exports,S=a("c2bf"),T=a("1315"),D=function(t){Object(d["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;Object(r["a"])(this,a);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n)),Object(p["a"])(Object(l["a"])(t),"topics",[]),Object(p["a"])(Object(l["a"])(t),"busy",!1),Object(p["a"])(Object(l["a"])(t),"infiniteId",+new Date),t}return Object(c["a"])(a,[{key:"board",get:function(){return C["a"].state.board}},{key:"decodeTitle",value:function(t){return Object(S["decode"])(t)}},{key:"resetInfinite",value:function(){this.infiniteId=+new Date,this.topics=[]}},{key:"handleInfinite",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=10,t.next=3,Object(_["f"])(this.board.id,this.topics.length,a);case 3:i=t.sent,i.length&&(n=this.topics).push.apply(n,Object(s["a"])(i)),i.length<a?e.complete():e.loaded();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatedAtString",value:function(t){return"".concat(T["DateTime"].fromISO(t.updated_at).toRelative(),"에 업데이트됨")}},{key:"isUpdated",value:function(t){var e=this.lastVisited(t.id);return!!e&&T["DateTime"].fromISO(t.updated_at)>e}},{key:"lastVisited",value:function(t){var e=localStorage.getItem("topic-last-visited.".concat(t));return e?T["DateTime"].fromISO(e):null}},{key:"mounted",value:function(){1==C["a"].state.board.is_active&&0==C["a"].state.user.isBlocked&&C["a"].commit("setCanWrite",!0)}},{key:"checkCanWrite",value:function(t){return 1!=t.is_closed&&1!=t.is_suspended&&1!=t.is_hidden&&1!=C["a"].state.user.isBlocked}}]),a}(b["c"]);Object(f["a"])([Object(b["d"])("$route.params")],D.prototype,"resetInfinite",null),D=Object(f["a"])([Object(b["a"])({components:{NewTopic:E,InfiniteLoading:k.a,Gravatar:m.a},metaInfo:function(){return{title:this.board.display_name}}})],D);var $=D,B=$,P=(a("9f80"),Object(x["a"])(B,i,n,!1,null,null,null));e["default"]=P.exports},ead7:function(t,e,a){}}]);
//# sourceMappingURL=topic_list.ab47b366.js.map